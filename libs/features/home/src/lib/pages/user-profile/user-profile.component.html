<andika-top-navbar></andika-top-navbar>
<andika-sidebar></andika-sidebar>

<div *ngIf="loading" class="fixed inset-0 flex items-center justify-center z-50">
  <div class="flex items-center">
    <svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-primary"  width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M10.72,19.9a8,8,0,0,1-6.5-9.79A7.77,7.77,0,0,1,10.4,4.16a8,8,0,0,1,9.49,6.52A1.54,1.54,0,0,0,21.38,12h.13a1.37,1.37,0,0,0,1.38-1.54,11,11,0,1,0-12.7,12.39A1.54,1.54,0,0,0,12,21.34h0A1.47,1.47,0,0,0,10.72,19.9Z" class="spinner_6kVp"/></svg>
    <span>Loading basic details...</span>
  </div>
</div>

<div  *ngIf="!loading" class="fixed inset-0 z-5 md:left-60 overflow-x-hidden">
  <div  class="p-6 mt-20 grid grid-flow-row auto-rows-max">    
    <form
      [formGroup]="form"
      class="w-full max-w-lg block border border-zinc-800 px-3 py-3 rounded-lg shadow hover:bg-gray-100 dark:bg-gray-800 dark:border-gray-700 dark:hover:bg-gray-700"
    >
      <h5
        class="mb-2 text-2xl font-bold tracking-tight text-gray-900 dark:text-white"
      >
        Basic details
      </h5>
      <hr class="mb-4">
      <div class="flex flex-wrap -mx-3 mb-6">
        <div class="w-full md:w-1/2 px-3 mb-6 md:mb-0">
          <label
            class="block uppercase tracking-wide text-gray-700 text-sm font-bold mb-2"
            for="grid-name"
          >
            Name
          </label>
          <input
            formControlName="name"
            class="appearance-none block text-sm w-full bg-gray-200 text-gray-700 border border-red-500 rounded py-2 px-4 mb-3 leading-tight focus:outline-none focus:bg-white"
            id="grid-first-name"
            type="text"
            placeholder="Full Name"
          />
          <p *ngIf="(form.get('name')?.value==='') || (form.get('name')?.value===null) || (form.get('name')?.value===undefined)" class="text-red-500 text-xs italic">Please fill out this field.</p>
        </div>
        <div class="w-full md:w-1/2 px-3 mb-6 md:mb-0">
          <label
            class="block uppercase tracking-wide text-gray-700 text-sm font-bold mb-2"
            for="grid-email"
          >
            Email
          </label>
          <input
            class="appearance-none block text-sm w-full bg-gray-200 text-gray-700 border border-red-500 rounded py-2 px-4 mb-3 leading-tight focus:outline-none focus:bg-white"
            id="grid-email"
            type="text"
            [value]="email"
            readonly
          />
        </div>
      </div>
      
    </form>
    <div class="flex flex-col items-right pb-10 justify-between">
      <div class="flex mt-4 md:mt-6">
        <a
        button
        (click)="updateProfile()"
        class="cursor-pointer mr-4 inline-flex items-center px-4 py-2 text-sm font-medium text-center text-white bg-yellow-500 rounded-lg hover:bg-zinc-700  hover:text-white focus:ring-4 focus:outline-none focus:ring-yellow-300 dark:bg-yellow-600 dark:hover:bg-yellow-700 dark:focus:ring-yellow-800"
      >
        <span *ngIf="!updateProfileSubmitting">
          <fa-icon [icon]="faCheck"></fa-icon>&nbsp;Update profile
        </span>
        <span *ngIf="updateProfileSubmitting;" class="text-white flex items-center">
          <svg fill="white" width="15" height="15" viewBox="0 0 24 24"  xmlns="http://www.w3.org/2000/svg"><style>.spinner_qM83{animation:spinner_8HQG 1.05s infinite}.spinner_oXPr{animation-delay:.1s}.spinner_ZTLf{animation-delay:.2s}@keyframes spinner_8HQG{0%,57.14%{animation-timing-function:cubic-bezier(0.33,.66,.66,1);transform:translate(0)}28.57%{animation-timing-function:cubic-bezier(0.33,0,.66,.33);transform:translateY(-6px)}100%{transform:translate(0)}}</style><circle class="spinner_qM83" cx="4" cy="12" r="3"/><circle class="spinner_qM83 spinner_oXPr" cx="12" cy="12" r="3"/><circle class="spinner_qM83 spinner_ZTLf" cx="20" cy="12" r="3"/></svg>
          Updating
        </span>
      </a>
      
        <a
          button
          (click)="openChangePasswordDialog()"
          class="cursor-pointer mr-4 inline-flex items-center px-4 py-2 text-sm font-medium text-center text-gray-900 bg-white border border-gray-300 rounded-lg hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-gray-200 dark:bg-gray-800 dark:text-white dark:border-gray-600 dark:hover:bg-gray-700 dark:hover:border-gray-700 dark:focus:ring-gray-700"
          >
          <span>Change password</span>
          </a
        >
        <a
        button
        (click)="openChangeEmailDialog()"
          class="cursor-pointer inline-flex items-center px-4 py-2 text-sm font-medium text-center text-gray-900 bg-white border border-gray-300 rounded-lg hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-gray-200 dark:bg-gray-800 dark:text-white dark:border-gray-600 dark:hover:bg-gray-700 dark:hover:border-gray-700 dark:focus:ring-gray-700"
          >
          <span>Change email</span>
          </a>
      </div>
    </div>

    <!-- Right Column -->

    <div
      class="w-full max-w-lg block border border-red-500 px-3 py-3 rounded-lg shadow hover:bg-red-100 dark:bg-red-800 dark:border-red-700 dark:hover:bg-red-700"
    >
      <h5
        class="mb-2 text-2xl font-bold tracking-tight text-red-500 dark:text-white"
      >
        Danger Zone
      </h5>
      <hr />
      <p class="mb-3 text-sm font-normal text-red-500 dark:text-gray-400">
        Once you delete your account, there is no going back. Please be certain.
      </p>

      <!-- Buttons -->
      <div class="flex flex-col items-right pb-10 justify-between">
        <div class="flex mt-4 md:mt-6">
          <a
            (click)="openDeleteConfirmationModal()"
            class="cursor-pointer mr-4 inline-flex items-center px-4 py-2 text-sm font-medium text-center text-white bg-red-500 rounded-lg hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-300 dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-800"
            >Delete my account</a
          >
        </div>
      </div>
    </div>
  </div>
</div>
